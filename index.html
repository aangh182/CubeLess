
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CubeLess</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <header>
        <div class="header-buttons">
            <button id="scramble-btn" class="icon-btn" title="Scramble">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z"/></svg>
            </button>
            <button id="solve-btn" class="icon-btn" title="Reset Cube">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
            </button>
        </div>
        <h1 class="app-title">CubeLess</h1>
        <div class="header-buttons">
            <button id="solution-btn" class="icon-btn" title="History & Solution">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>
            </button>
            <button id="record-btn" class="icon-btn" title="Record Moves">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
            </button>
        </div>
    </header>


    <!-- Side Menu -->
    <div id="side-menu" class="side-menu">
        <button id="menu-settings" class="menu-item">Settings</button>
        <button id="menu-about" class="menu-item">About</button>
    </div>
    <div id="menu-overlay" class="menu-overlay"></div>

    <!-- Solution History Modal -->
    <div id="solution-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span id="close-modal" class="close">&times;</span>
            <h2>Solution <span id="solution-count"></span> <button id="copy-btn" title="Copy to Clipboard">ðŸ“‹</button></h2>
            <div id="move-history-list"></div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal" style="display: none;">
        <div class="modal-content settings-content">
            <span id="close-settings" class="close">&times;</span>
            <h2>Settings</h2>
            
            <div class="setting-group">
                <h3>Color Scheme</h3>
                <div class="color-grid">
                    <label class="color-item"><span>U</span> <input type="color" id="color-u" value="#ffffff"></label>
                    <label class="color-item"><span>D</span> <input type="color" id="color-d" value="#ffff00"></label>
                    <label class="color-item"><span>F</span> <input type="color" id="color-f" value="#11ee11"></label>
                    <label class="color-item"><span>B</span> <input type="color" id="color-b" value="#1177dd"></label>
                    <label class="color-item"><span>R</span> <input type="color" id="color-r" value="#ff3333"></label>
                    <label class="color-item"><span>L</span> <input type="color" id="color-l" value="#f88826"></label>
                </div>
            </div>

            <div class="setting-group toggle-group">
                <label class="toggle-container">
                    <input type="checkbox" id="setting-cancel-solution" checked>
                    <span class="checkmark"></span>
                    <span class="label-text">Cancel Solution</span>
                </label>
            </div>

            <div class="setting-group toggle-group">
                <label class="toggle-container">
                    <input type="checkbox" id="setting-manual-scramble">
                    <span class="checkmark"></span>
                    <span class="label-text">Manual Scramble</span>
                </label>
            </div>
        </div>
    </div>

    <!-- About Modal -->
    <div id="about-modal" class="modal" style="display: none;">
        <div class="modal-content about-content">
            <span id="close-about" class="close">&times;</span>
            
            <div class="about-body">
                <img src="image/pic.png" alt="CubeLess Mascot" class="about-image">
                
                <h2 class="about-title">CubeLess v1.2</h2>
                <p class="about-author">Made by <a href="https://github.com/aangh182" target="_blank" class="author-link">aangh182</a></p>
                
                <div class="about-links">
                    <a href="https://www.youtube.com/@Aanai182" target="_blank" class="social-btn youtube-btn">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
                        <span>YouTube</span>
                    </a>
                    
                    <a href="https://www.worldcubeassociation.org/persons/2017ANNG03" target="_blank" class="social-btn wca-btn">
                        <img src="image/wca.png" alt="WCA" class="wca-icon">
                        <span>WCA</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Manual Scramble Modal -->
    <div id="manual-scramble-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span id="close-manual-scramble" class="close">&times;</span>
            <h2>Manual Scramble</h2>
            <div class="input-group">
                <input type="text" id="manual-scramble-input" placeholder="Enter scramble moves" autocomplete="off">
                <button id="manual-scramble-confirm" class="action-btn">Scramble</button>
            </div>
        </div>
    </div>

    <div class="cube-container">
        <canvas id="cube-canvas" width="250" height="300"></canvas>
        <button id="layout-btn" title="Switch Layout">â‡„</button>
    </div>

    <div id="layout-main" class="controls-grid">
        <!-- Row 1 -->
        <button class="grid-btn" data-move="y'">y'</button>
        <button class="grid-btn" data-move="B">B</button>
        <button class="grid-btn" data-move="B'">B'</button>
        <button class="grid-btn" data-move="y">y</button>

        <!-- Row 2 -->
        <button class="grid-btn" data-move="L'">L'</button>
        <button class="grid-btn" data-move="U'">U'</button>
        <button class="grid-btn" data-move="U">U</button>
        <button class="grid-btn" data-move="R">R</button>

        <!-- Row 3 -->
        <button class="grid-btn" data-move="L">L</button>
        <button class="grid-btn" data-move="F'">F'</button>
        <button class="grid-btn" data-move="F">F</button>
        <button class="grid-btn" data-move="R'">R'</button>

        <!-- Row 4 -->
        <button class="grid-btn" data-move="x'">x'</button>
        <button class="grid-btn" data-move="D">D</button>
        <button class="grid-btn" data-move="D'">D'</button>
        <button class="grid-btn" data-move="x">x</button>
    </div>

    <div id="layout-extra" class="controls-grid" style="display: none;">
        <!-- Row 1 -->
        <button class="grid-btn" data-move="y'">y'</button>
        <button class="grid-btn" data-move="S'">S'</button>
        <button class="grid-btn" data-move="S">S</button>
        <button class="grid-btn" data-move="y">y</button>

        <!-- Row 2 -->
        <button class="grid-btn" data-move="l'">Lw'</button>
        <button class="grid-btn" data-move="u'">Uw'</button>
        <button class="grid-btn" data-move="u">Uw</button>
        <button class="grid-btn" data-move="r">Rw</button>

        <!-- Row 3 -->
        <button class="grid-btn" data-move="l">Lw</button>
        <button class="grid-btn" data-move="M">M</button>
        <button class="grid-btn" data-move="M'">M'</button>
        <button class="grid-btn" data-move="r'">Rw'</button>

        <!-- Row 4 -->
        <button class="grid-btn" data-move="z'">z'</button>
        <button class="grid-btn" data-move="d">Dw</button>
        <button class="grid-btn" data-move="d'">Dw'</button>
        <button class="grid-btn" data-move="z">z</button>
    </div>

    <!-- Dependencies -->
    <script src="js/cube.js"></script>
    <script src="js/solve.js"></script>
    <script src="js/cubeless.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
    </script>
</body>
</html>
